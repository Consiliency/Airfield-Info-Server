Resources:
  AWSEBLaunchTemplate:
    Type: AWS::EC2::LaunchTemplate
    Properties:
      LaunchTemplateData:
        InstanceType: t2.micro
        SecurityGroups: 
          - !Ref AWSEBSecurityGroup
        IamInstanceProfile:
          Name: aws-elasticbeanstalk-ec2-role
        UserData: 
          Fn::Base64: |
            #!/bin/bash
            yum update -y
            yum install -y python3-devel postgresql-devel gcc
        MetadataOptions:
          HttpTokens: optional
          HttpEndpoint: enabled

option_settings:
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 1
  aws:elasticbeanstalk:environment:
    EnvironmentType: SingleInstance
  aws:elasticbeanstalk:container:python:
    WSGIPath: config.wsgi:application
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: config.production
    PYTHONPATH: /var/app/current 